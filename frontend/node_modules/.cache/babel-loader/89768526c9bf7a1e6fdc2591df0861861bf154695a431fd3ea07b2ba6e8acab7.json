{"ast":null,"code":"var _jsxFileName = \"E:\\\\Diplomna\\\\frontend\\\\src\\\\components\\\\AntivirusListT.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport ExpertReviews from \"./ExpertReviews\";\nimport \"../AntivirusList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AntivirusListT() {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [sortBy, setSortBy] = useState(\"\");\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetch(\"http://localhost:5000/api/admin\").then(res => res.json()).then(async data => {\n      const enriched = await Promise.all(data.map(async product => {\n        try {\n          const res = await fetch(`http://localhost:5000/api/products/${product.ProductName}/features`);\n          const features = await res.json();\n          return {\n            ...product,\n            features\n          };\n        } catch (err) {\n          console.error(\"❌ Грешка при взимане на features:\", err);\n          return {\n            ...product,\n            features: []\n          };\n        }\n      }));\n      setProducts(enriched);\n    }).catch(err => {\n      console.error(\"❌ Грешка при зареждане на продукти:\", err);\n      setProducts([]);\n    });\n  }, []);\n  const sortedProducts = [...products];\n  if (sortBy === \"price\") {\n    sortedProducts.sort((a, b) => parseFloat(a.Price) - parseFloat(b.Price));\n  } else if (sortBy === \"rating\") {\n    sortedProducts.sort((a, b) => (b.AverageRating || 0) - (a.AverageRating || 0));\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"px-4 py-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"antivirus-list-title\",\n      children: \"\\u041D\\u0430\\u0448\\u0438\\u0442\\u0435 \\u0410\\u043D\\u0442\\u0438\\u0432\\u0438\\u0440\\u0443\\u0441\\u043D\\u0438 \\u041F\\u0440\\u0435\\u0434\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u044F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center gap-4 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSortBy(\"price\"),\n        className: \"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition\",\n        children: \"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u0430\\u0439 \\u043F\\u043E \\u0446\\u0435\\u043D\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSortBy(\"rating\"),\n        className: \"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition\",\n        children: \"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u0430\\u0439 \\u043F\\u043E \\u0440\\u0435\\u0439\\u0442\\u0438\\u043D\\u0433\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"antivirus-list-container\",\n      children: sortedProducts.map(product => {\n        var _product$Description;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-card\",\n          onClick: () => navigate(`/product/${product.ProductName}`),\n          style: {\n            cursor: \"pointer\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: product.ImageURL || \"/placeholder.png\",\n            alt: product.ProductName,\n            className: \"product-img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-title\",\n              children: product.ProductName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-description\",\n              children: [(_product$Description = product.Description) === null || _product$Description === void 0 ? void 0 : _product$Description.slice(0, 100), \"...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-price\",\n              children: [product.Price, \" \\u043B\\u0432\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 15\n            }, this), product.features && product.features.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"text-sm text-left mt-2 text-gray-500\",\n              children: product.features.slice(0, 3).map((f, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\"\\u2022 \", f.Feature]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this)]\n        }, product.ProductID, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-12\",\n      children: /*#__PURE__*/_jsxDEV(ExpertReviews, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(AntivirusListT, \"MfFzn2p9/SlyeiOaM7O1ydy7J8U=\", false, function () {\n  return [useNavigate];\n});\n_c = AntivirusListT;\nexport default AntivirusListT;\nvar _c;\n$RefreshReg$(_c, \"AntivirusListT\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","ExpertReviews","jsxDEV","_jsxDEV","AntivirusListT","_s","products","setProducts","sortBy","setSortBy","navigate","fetch","then","res","json","data","enriched","Promise","all","map","product","ProductName","features","err","console","error","catch","sortedProducts","sort","a","b","parseFloat","Price","AverageRating","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_product$Description","style","cursor","src","ImageURL","alt","Description","slice","length","f","index","Feature","ProductID","_c","$RefreshReg$"],"sources":["E:/Diplomna/frontend/src/components/AntivirusListT.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport ExpertReviews from \"./ExpertReviews\";\r\nimport \"../AntivirusList.css\";\r\n\r\nfunction AntivirusListT() {\r\n  const [products, setProducts] = useState([]);\r\n  const [sortBy, setSortBy] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/api/admin\")\r\n      .then((res) => res.json())\r\n      .then(async (data) => {\r\n        const enriched = await Promise.all(\r\n          data.map(async (product) => {\r\n            try {\r\n              const res = await fetch(\r\n                `http://localhost:5000/api/products/${product.ProductName}/features`\r\n              );\r\n              const features = await res.json();\r\n              return { ...product, features };\r\n            } catch (err) {\r\n              console.error(\"❌ Грешка при взимане на features:\", err);\r\n              return { ...product, features: [] };\r\n            }\r\n          })\r\n        );\r\n        setProducts(enriched);\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"❌ Грешка при зареждане на продукти:\", err);\r\n        setProducts([]);\r\n      });\r\n  }, []);\r\n\r\n  const sortedProducts = [...products];\r\n  if (sortBy === \"price\") {\r\n    sortedProducts.sort((a, b) => parseFloat(a.Price) - parseFloat(b.Price));\r\n  } else if (sortBy === \"rating\") {\r\n    sortedProducts.sort((a, b) => (b.AverageRating || 0) - (a.AverageRating || 0));\r\n  }\r\n\r\n  return (\r\n    <div className=\"px-4 py-8\">\r\n      <h2 className=\"antivirus-list-title\">Нашите Антивирусни Предложения</h2>\r\n\r\n      <div className=\"flex justify-center gap-4 mb-6\">\r\n        <button onClick={() => setSortBy(\"price\")} className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition\">Сортирай по цена</button>\r\n        <button onClick={() => setSortBy(\"rating\")} className=\"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition\">Сортирай по рейтинг</button>\r\n      </div>\r\n\r\n      <div className=\"antivirus-list-container\">\r\n        {sortedProducts.map((product) => (\r\n          <div\r\n            key={product.ProductID}\r\n            className=\"product-card\"\r\n            onClick={() => navigate(`/product/${product.ProductName}`)}\r\n            style={{ cursor: \"pointer\" }}\r\n          >\r\n            <img\r\n              src={product.ImageURL || \"/placeholder.png\"}\r\n              alt={product.ProductName}\r\n              className=\"product-img\"\r\n            />\r\n            <div className=\"product-info\">\r\n              <div className=\"product-title\">{product.ProductName}</div>\r\n              <div className=\"product-description\">\r\n                {product.Description?.slice(0, 100)}...\r\n              </div>\r\n              <div className=\"product-price\">{product.Price} лв</div>\r\n              {product.features && product.features.length > 0 && (\r\n                <ul className=\"text-sm text-left mt-2 text-gray-500\">\r\n                  {product.features.slice(0, 3).map((f, index) => (\r\n                    <li key={index}>• {f.Feature}</li>\r\n                  ))}\r\n                </ul>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"mt-12\">\r\n        <ExpertReviews />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AntivirusListT;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAO,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9B,SAASC,cAAcA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACS,MAAM,EAAEC,SAAS,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAMW,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAE9BF,SAAS,CAAC,MAAM;IACda,KAAK,CAAC,iCAAiC,CAAC,CACrCC,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAC,MAAOG,IAAI,IAAK;MACpB,MAAMC,QAAQ,GAAG,MAAMC,OAAO,CAACC,GAAG,CAChCH,IAAI,CAACI,GAAG,CAAC,MAAOC,OAAO,IAAK;QAC1B,IAAI;UACF,MAAMP,GAAG,GAAG,MAAMF,KAAK,CACrB,sCAAsCS,OAAO,CAACC,WAAW,WAC3D,CAAC;UACD,MAAMC,QAAQ,GAAG,MAAMT,GAAG,CAACC,IAAI,CAAC,CAAC;UACjC,OAAO;YAAE,GAAGM,OAAO;YAAEE;UAAS,CAAC;QACjC,CAAC,CAAC,OAAOC,GAAG,EAAE;UACZC,OAAO,CAACC,KAAK,CAAC,mCAAmC,EAAEF,GAAG,CAAC;UACvD,OAAO;YAAE,GAAGH,OAAO;YAAEE,QAAQ,EAAE;UAAG,CAAC;QACrC;MACF,CAAC,CACH,CAAC;MACDf,WAAW,CAACS,QAAQ,CAAC;IACvB,CAAC,CAAC,CACDU,KAAK,CAAEH,GAAG,IAAK;MACdC,OAAO,CAACC,KAAK,CAAC,qCAAqC,EAAEF,GAAG,CAAC;MACzDhB,WAAW,CAAC,EAAE,CAAC;IACjB,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMoB,cAAc,GAAG,CAAC,GAAGrB,QAAQ,CAAC;EACpC,IAAIE,MAAM,KAAK,OAAO,EAAE;IACtBmB,cAAc,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKC,UAAU,CAACF,CAAC,CAACG,KAAK,CAAC,GAAGD,UAAU,CAACD,CAAC,CAACE,KAAK,CAAC,CAAC;EAC1E,CAAC,MAAM,IAAIxB,MAAM,KAAK,QAAQ,EAAE;IAC9BmB,cAAc,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,CAACA,CAAC,CAACG,aAAa,IAAI,CAAC,KAAKJ,CAAC,CAACI,aAAa,IAAI,CAAC,CAAC,CAAC;EAChF;EAEA,oBACE9B,OAAA;IAAK+B,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACxBhC,OAAA;MAAI+B,SAAS,EAAC,sBAAsB;MAAAC,QAAA,EAAC;IAA8B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAExEpC,OAAA;MAAK+B,SAAS,EAAC,gCAAgC;MAAAC,QAAA,gBAC7ChC,OAAA;QAAQqC,OAAO,EAAEA,CAAA,KAAM/B,SAAS,CAAC,OAAO,CAAE;QAACyB,SAAS,EAAC,0EAA0E;QAAAC,QAAA,EAAC;MAAgB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACzJpC,OAAA;QAAQqC,OAAO,EAAEA,CAAA,KAAM/B,SAAS,CAAC,QAAQ,CAAE;QAACyB,SAAS,EAAC,4EAA4E;QAAAC,QAAA,EAAC;MAAmB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5J,CAAC,eAENpC,OAAA;MAAK+B,SAAS,EAAC,0BAA0B;MAAAC,QAAA,EACtCR,cAAc,CAACR,GAAG,CAAEC,OAAO;QAAA,IAAAqB,oBAAA;QAAA,oBAC1BtC,OAAA;UAEE+B,SAAS,EAAC,cAAc;UACxBM,OAAO,EAAEA,CAAA,KAAM9B,QAAQ,CAAC,YAAYU,OAAO,CAACC,WAAW,EAAE,CAAE;UAC3DqB,KAAK,EAAE;YAAEC,MAAM,EAAE;UAAU,CAAE;UAAAR,QAAA,gBAE7BhC,OAAA;YACEyC,GAAG,EAAExB,OAAO,CAACyB,QAAQ,IAAI,kBAAmB;YAC5CC,GAAG,EAAE1B,OAAO,CAACC,WAAY;YACzBa,SAAS,EAAC;UAAa;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxB,CAAC,eACFpC,OAAA;YAAK+B,SAAS,EAAC,cAAc;YAAAC,QAAA,gBAC3BhC,OAAA;cAAK+B,SAAS,EAAC,eAAe;cAAAC,QAAA,EAAEf,OAAO,CAACC;YAAW;cAAAe,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC1DpC,OAAA;cAAK+B,SAAS,EAAC,qBAAqB;cAAAC,QAAA,IAAAM,oBAAA,GACjCrB,OAAO,CAAC2B,WAAW,cAAAN,oBAAA,uBAAnBA,oBAAA,CAAqBO,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,EAAC,KACtC;YAAA;cAAAZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACNpC,OAAA;cAAK+B,SAAS,EAAC,eAAe;cAAAC,QAAA,GAAEf,OAAO,CAACY,KAAK,EAAC,eAAG;YAAA;cAAAI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,EACtDnB,OAAO,CAACE,QAAQ,IAAIF,OAAO,CAACE,QAAQ,CAAC2B,MAAM,GAAG,CAAC,iBAC9C9C,OAAA;cAAI+B,SAAS,EAAC,sCAAsC;cAAAC,QAAA,EACjDf,OAAO,CAACE,QAAQ,CAAC0B,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC7B,GAAG,CAAC,CAAC+B,CAAC,EAAEC,KAAK,kBACzChD,OAAA;gBAAAgC,QAAA,GAAgB,SAAE,EAACe,CAAC,CAACE,OAAO;cAAA,GAAnBD,KAAK;gBAAAf,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAmB,CAClC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CACL;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA,GAvBDnB,OAAO,CAACiC,SAAS;UAAAjB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAwBnB,CAAC;MAAA,CACP;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAENpC,OAAA;MAAK+B,SAAS,EAAC,OAAO;MAAAC,QAAA,eACpBhC,OAAA,CAACF,aAAa;QAAAmC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACd,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAClC,EAAA,CAnFQD,cAAc;EAAA,QAGJJ,WAAW;AAAA;AAAAsD,EAAA,GAHrBlD,cAAc;AAqFvB,eAAeA,cAAc;AAAC,IAAAkD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}