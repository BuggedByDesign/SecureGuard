{"ast":null,"code":"import React,{useEffect,useState,useRef,useContext}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{Search}from\"lucide-react\";import{AuthContext}from\"../context/AuthContext\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Navbar(){const{isLoggedIn,isAdmin,logout}=useContext(AuthContext);const[products,setProducts]=useState([]);const[searchTerm,setSearchTerm]=useState(\"\");const searchRef=useRef(null);const navigate=useNavigate();useEffect(()=>{fetch(\"http://localhost:5000/api/admin\").then(res=>res.json()).then(data=>setProducts(Array.isArray(data)?data:[])).catch(err=>console.error(\"‚ùå Failed to fetch products:\",err));},[]);useEffect(()=>{const handleClickOutside=e=>{if(searchRef.current&&!searchRef.current.contains(e.target)){setSearchTerm(\"\");}};document.addEventListener(\"mousedown\",handleClickOutside);return()=>document.removeEventListener(\"mousedown\",handleClickOutside);},[]);const filtered=searchTerm?products.filter(p=>{var _p$ProductName,_p$Description;return(((_p$ProductName=p.ProductName)===null||_p$ProductName===void 0?void 0:_p$ProductName.toLowerCase())+\" \"+((_p$Description=p.Description)===null||_p$Description===void 0?void 0:_p$Description.toLowerCase())).includes(searchTerm.toLowerCase());}):[];return/*#__PURE__*/_jsx(\"nav\",{className:\"w-full bg-white shadow-md fixed top-0 left-0 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-xl font-bold text-blue-800 flex items-center gap-1\",children:\"\\uD83D\\uDEE1\\uFE0F SecureGuard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-5\",children:[/*#__PURE__*/_jsx(Link,{to:\"/compare\",className:\"text-gray-700 hover:text-blue-600 text-sm font-medium\",children:\"Compare\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#top-picks\",className:\"text-gray-700 hover:text-blue-600 text-sm font-medium\",children:\"Top Picks\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#expert-reviews\",className:\"text-gray-700 hover:text-blue-600 text-sm font-medium\",children:\"Expert Reviews\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#faq\",className:\"text-gray-700 hover:text-blue-600 text-sm font-medium\",children:\"FAQ\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",ref:searchRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center border border-gray-300 rounded-full px-3 py-1 bg-white w-9 group-hover:w-64 focus-within:w-64 transition-all duration-300 overflow-hidden\",children:[/*#__PURE__*/_jsx(Search,{size:16,className:\"text-gray-400 shrink-0\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search antivirus...\",className:\"ml-2 w-full text-sm focus:outline-none opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity duration-200\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),onKeyDown:e=>{if(e.key===\"Enter\"&&filtered.length>0){navigate(\"/product/\".concat(encodeURIComponent(filtered[0].ProductName)));setSearchTerm(\"\");}}})]}),filtered.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute left-0 right-0 mt-1 bg-white border border-gray-200 rounded shadow z-50 max-h-60 overflow-y-auto\",children:filtered.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-2 hover:bg-blue-100 cursor-pointer text-sm flex justify-between\",onClick:()=>{navigate(\"/product/\".concat(encodeURIComponent(product.ProductName)));setSearchTerm(\"\");},children:[/*#__PURE__*/_jsx(\"span\",{children:product.ProductName}),/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-medium\",children:product.Price})]},product.ProductID))})]}),isLoggedIn?/*#__PURE__*/_jsxs(_Fragment,{children:[isAdmin&&/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"px-4 py-2 border border-green-600 text-green-600 rounded hover:bg-green-600 hover:text-white transition text-sm font-medium\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"px-4 py-2 border border-red-600 text-red-600 rounded hover:bg-red-600 hover:text-white transition text-sm font-medium\",children:\"Logout\"})]}):/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"px-4 py-2 border border-blue-600 text-blue-600 rounded hover:bg-blue-600 hover:text-white transition text-sm font-medium\",children:\"Login\"})]})]})});}","map":{"version":3,"names":["React","useEffect","useState","useRef","useContext","Link","useNavigate","Search","AuthContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Navbar","isLoggedIn","isAdmin","logout","products","setProducts","searchTerm","setSearchTerm","searchRef","navigate","fetch","then","res","json","data","Array","isArray","catch","err","console","error","handleClickOutside","e","current","contains","target","document","addEventListener","removeEventListener","filtered","filter","p","_p$ProductName","_p$Description","ProductName","toLowerCase","Description","includes","className","children","to","href","ref","size","type","placeholder","value","onChange","onKeyDown","key","length","concat","encodeURIComponent","map","product","onClick","Price","ProductID"],"sources":["E:/Diplomna/frontend/src/components/Navbar.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useContext } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { Search } from \"lucide-react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nexport default function Navbar() {\r\n  const { isLoggedIn, isAdmin, logout } = useContext(AuthContext);\r\n  const [products, setProducts] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const searchRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/api/admin\")\r\n      .then((res) => res.json())\r\n      .then((data) => setProducts(Array.isArray(data) ? data : []))\r\n      .catch((err) => console.error(\"‚ùå Failed to fetch products:\", err));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (searchRef.current && !searchRef.current.contains(e.target)) {\r\n        setSearchTerm(\"\");\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  const filtered = searchTerm\r\n    ? products.filter((p) =>\r\n        (p.ProductName?.toLowerCase() + \" \" + p.Description?.toLowerCase()).includes(searchTerm.toLowerCase())\r\n      )\r\n    : [];\r\n\r\n  return (\r\n    <nav className=\"w-full bg-white shadow-md fixed top-0 left-0 z-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between\">\r\n        <Link to=\"/\" className=\"text-xl font-bold text-blue-800 flex items-center gap-1\">\r\n          üõ°Ô∏è SecureGuard\r\n        </Link>\r\n\r\n        <div className=\"flex items-center gap-5\">\r\n          <Link to=\"/compare\" className=\"text-gray-700 hover:text-blue-600 text-sm font-medium\">Compare</Link>\r\n          <a href=\"#top-picks\" className=\"text-gray-700 hover:text-blue-600 text-sm font-medium\">Top Picks</a>\r\n          <a href=\"#expert-reviews\" className=\"text-gray-700 hover:text-blue-600 text-sm font-medium\">Expert Reviews</a>\r\n          <a href=\"#faq\" className=\"text-gray-700 hover:text-blue-600 text-sm font-medium\">FAQ</a>\r\n\r\n          {/* Search */}\r\n          <div className=\"relative group\" ref={searchRef}>\r\n            <div className=\"flex items-center border border-gray-300 rounded-full px-3 py-1 bg-white w-9 group-hover:w-64 focus-within:w-64 transition-all duration-300 overflow-hidden\">\r\n              <Search size={16} className=\"text-gray-400 shrink-0\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search antivirus...\"\r\n                className=\"ml-2 w-full text-sm focus:outline-none opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity duration-200\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === \"Enter\" && filtered.length > 0) {\r\n                    navigate(`/product/${encodeURIComponent(filtered[0].ProductName)}`);\r\n                    setSearchTerm(\"\");\r\n                  }\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            {filtered.length > 0 && (\r\n              <div className=\"absolute left-0 right-0 mt-1 bg-white border border-gray-200 rounded shadow z-50 max-h-60 overflow-y-auto\">\r\n                {filtered.map((product) => (\r\n                  <div\r\n                    key={product.ProductID}\r\n                    className=\"px-4 py-2 hover:bg-blue-100 cursor-pointer text-sm flex justify-between\"\r\n                    onClick={() => {\r\n                      navigate(`/product/${encodeURIComponent(product.ProductName)}`);\r\n                      setSearchTerm(\"\");\r\n                    }}\r\n                  >\r\n                    <span>{product.ProductName}</span>\r\n                    <span className=\"text-blue-600 font-medium\">{product.Price}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Buttons */}\r\n          {isLoggedIn ? (\r\n            <>\r\n              {isAdmin && (\r\n                <Link\r\n                  to=\"/admin\"\r\n                  className=\"px-4 py-2 border border-green-600 text-green-600 rounded hover:bg-green-600 hover:text-white transition text-sm font-medium\"\r\n                >\r\n                  Admin\r\n                </Link>\r\n              )}\r\n              <button\r\n                onClick={logout}\r\n                className=\"px-4 py-2 border border-red-600 text-red-600 rounded hover:bg-red-600 hover:text-white transition text-sm font-medium\"\r\n              >\r\n                Logout\r\n              </button>\r\n            </>\r\n          ) : (\r\n            <Link\r\n              to=\"/login\"\r\n              className=\"px-4 py-2 border border-blue-600 text-blue-600 rounded hover:bg-blue-600 hover:text-white transition text-sm font-medium\"\r\n            >\r\n              Login\r\n            </Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}